{% extends "base.html.twig" %}

{% block title %}Подробная информация по валюте{% endblock %}

{% block content %}
    <div id="chart-data" data-chart-data="{{ chartData|json_encode }}"></div>
    {% if chartData is empty %}
        <div class="text-center mb-5">График динамики курса валюты не может быть отображен.</div>
    {% else %}
        <div class="row mb-5">
            <div id="currency-chart" class="col-10"></div>
            <div id="#currency-chart-range-selector" class="col-2"></div>
        </div>
    {% endif %}
    <div class="container-fluid mb-5">
        <table class="table table-striped table-sm">
        <tbody>
            <tr class="d-flex">
                <th class="col-6">Название валюты</th>
                <td class="col-6">{{ currencyData.currencyName }}</td>
            </tr>
            <tr class="d-flex">
                <th class="col-6">Код валюты</th>
                <td class="col-6">{{ currencyData.currencyIso }}</td>
            </tr>
            <tr class="d-flex">
                <th class="col-6">Идентификатор ЦБ</th>
                <td class="col-6">{{ currencyData.currencyCbrfId }}</td>
            </tr>
            <tr class="d-flex">
                <th class="col-6">Текущий курс валюты к рублю</th>
                {% if currencyData.currencyRate is null %}
                    <td class="col-6">Нет данных</td>
                {% else %}
                    <td class="col-6">{{ currencyData.currencyRate|number_format(2)}} <small>на {{ currencyData.lastUpdateRateDate }}</small></td>
                {% endif %}
            </tr>
            <tr class="d-flex">
                <th class="col-6">Страны в которых валюта является основной</th>
                <td class="col-6">{{ currencyData.countryNames|join(', ') }}</td>
            </tr>
        </tbody>
        </table>
    </div>
{% endblock %}

{% block scripts %}
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/plugins/rangeSelector.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/lang/ru_RU.js"></script>
    <script src="/assets/js/currencyChart/chart.js"></script>
    <script src="/assets/js/currencyChart/init.js"></script>
{% endblock %}